<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CMS codemirror</title>
    <link rel="stylesheet" href="vendor/bettertext/bettertext.css">
    <link rel="stylesheet" href="vendor/codemirror/lib/codemirror.css">
    <link rel="stylesheet" href="vendor/codemirror/theme/monokai.css">
    <link rel="stylesheet" href="vendor/codemirror/addon/hint/show-hint.css">
    <script src="vendor/codemirror/lib/codemirror.js"></script>
    <script src="vendor/codemirror/mode/htmlmixed/htmlmixed.js"></script>
    <script src="vendor/codemirror/mode/javascript/javascript.js"></script>
    <script src="vendor/codemirror/mode/xml/xml.js"></script>
    <script src="vendor/codemirror/mode/css/css.js"></script>
    <script src="vendor/codemirror/addon/selection/active-line.js"></script>
    <script src="vendor/codemirror/addon/edit/matchbrackets.js"></script>
    <script src="vendor/codemirror/addon/hint/show-hint.js"></script>
    <script src="vendor/codemirror/addon/hint/anyword-hint.js"></script>
    <script src="vendor/emmet/emmet.js"></script>
    <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
</head>
<body>
    <article>
        <h1>CMS codemirror editor prototype</h1>
        <form>
<textarea id="code" name="code" rows="40">
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Document</title>
</head>
<body>

</body>
</html>
</textarea>
        </form>

        <h2>Default keybindings</h2>
        <ul>
            <li><code>Cmd-E</code> or <code>Tab</code>: Expand abbreviation</li>
            <li><code>Ctrl-Space</code>: autocomplete</li>
        </ul>

    </article>
    <script>
        // Register an array of completion words for this mode
        CodeMirror.registerHelper("hintWords", "text/html",
        ["banner", "carousel", "slider"]);
        var emmetsnippets = ["banner", "carousel", "slider"];

        var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
            lineNumbers: true,
            styleActiveLine: true,
            matchBrackets: true,
            indentUnit: 4,
            theme: "monokai",
            mode:  "text/html",
            profile: 'xhtml',
            extraKeys: {"Ctrl-Space": "autocomplete"},
            hintOptions: {}
        });

        emmetCodeMirror(editor, {
            'Tab': 'emmet.expand_abbreviation_with_tab'
        });

        window.onload = function() {
            $.getJSON( "vendor/emmet/snippets.json", function( data ) {
                emmetCodeMirror.loadUserData(data);
            });
        };
    </script>
</body>
</html>
